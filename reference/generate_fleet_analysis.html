<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Complete Fleet Activity Analysis Pipeline — generate_fleet_analysis • peskas.zanzibar.data.pipeline</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Alegreya_Sans_SC-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Complete Fleet Activity Analysis Pipeline — generate_fleet_analysis"><meta name="description" content="Executes the complete fleet activity analysis pipeline from data retrieval through
final aggregation and cloud storage upload. This function orchestrates all steps
including metadata retrieval, trip processing, fleet estimation, and results storage."><meta property="og:description" content="Executes the complete fleet activity analysis pipeline from data retrieval through
final aggregation and cloud storage upload. This function orchestrates all steps
including metadata retrieval, trip processing, fleet estimation, and results storage."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peskas.zanzibar.data.pipeline</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate Complete Fleet Activity Analysis Pipeline</h1>

      <div class="d-none name"><code>generate_fleet_analysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Executes the complete fleet activity analysis pipeline from data retrieval through
final aggregation and cloud storage upload. This function orchestrates all steps
including metadata retrieval, trip processing, fleet estimation, and results storage.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_fleet_analysis</span><span class="op">(</span>log_threshold <span class="op">=</span> <span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">DEBUG</a></span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-log-threshold">log_threshold<a class="anchor" aria-label="anchor" href="#arg-log-threshold"></a></dt>
<dd><p>Logging threshold level (default: logger::DEBUG).
Controls the verbosity of logging output during pipeline execution.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns NULL. The function's primary purpose is to:</p><ul><li><p>Generate and save aggregated analysis results to RDS file</p></li>
<li><p>Upload results to cloud storage</p></li>
<li><p>Log progress and completion status</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function executes the complete analysis pipeline:</p><ol><li><p>Reads configuration parameters and retrieves metadata</p></li>
<li><p>Prepares boat registry from metadata</p></li>
<li><p>Processes trip data from PDS API using device IMEIs</p></li>
<li><p>Downloads monthly summaries from cloud storage</p></li>
<li><p>Calculates monthly trip statistics from GPS data</p></li>
<li><p>Estimates fleet-wide activity using boat registry</p></li>
<li><p>Calculates district totals using catch/revenue data</p></li>
<li><p>Generates annual summary statistics by district</p></li>
<li><p>Saves aggregated results to RDS file and uploads to cloud storage</p></li>
</ol><p>The function creates a comprehensive analysis that scales GPS-tracked boat data
to estimate total fleet activity, catch, and revenue by district and time period.</p>
    </div>
    <div class="section level2">
    <h2 id="output-files">Output Files<a class="anchor" aria-label="anchor" href="#output-files"></a></h2>


<p>The function creates an RDS file containing a list with three components:</p><ul><li><p><strong>fleet_estimates</strong>: Monthly fleet activity estimates by district</p></li>
<li><p><strong>district_totals</strong>: Monthly district-level catch and revenue totals</p></li>
<li><p><strong>annual_summary</strong>: Annual summary statistics by district including:</p><ul><li><p>months_with_data: Number of months with data</p></li>
<li><p>avg_sampling_rate: Average sampling rate across months</p></li>
<li><p>total_estimated_catch_kg: Total estimated annual catch</p></li>
<li><p>total_estimated_revenue: Total estimated annual revenue</p></li>
<li><p>avg_monthly_catch_kg: Average monthly catch</p></li>
<li><p>avg_monthly_revenue: Average monthly revenue</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="prepare_boat_registry.html">prepare_boat_registry()</a></code> for boat registry preparation</p></li>
<li><p><code><a href="process_trip_data.html">process_trip_data()</a></code> for trip data processing</p></li>
<li><p><code><a href="calculate_monthly_trip_stats.html">calculate_monthly_trip_stats()</a></code> for monthly statistics</p></li>
<li><p><code><a href="estimate_fleet_activity.html">estimate_fleet_activity()</a></code> for fleet estimates</p></li>
<li><p><code><a href="calculate_district_totals.html">calculate_district_totals()</a></code> for final totals</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Run complete fleet analysis pipeline</span></span></span>
<span class="r-in"><span><span class="fu">generate_fleet_analysis</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run with different logging level</span></span></span>
<span class="r-in"><span><span class="fu">generate_fleet_analysis</span><span class="op">(</span>log_threshold <span class="op">=</span> <span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">INFO</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lorenzo Longobardi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

