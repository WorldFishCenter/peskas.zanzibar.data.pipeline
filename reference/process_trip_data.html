<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process Trip Data with District Information — process_trip_data • peskas.zanzibar.data.pipeline</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Alegreya_Sans_SC-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process Trip Data with District Information — process_trip_data"><meta name="description" content="Retrieves and processes trip data from the PDS API by adding district information
from community metadata. Filters out unrealistic trips longer than 48 hours to
remove outliers and prepares data for monthly statistics calculation."><meta property="og:description" content="Retrieves and processes trip data from the PDS API by adding district information
from community metadata. Filters out unrealistic trips longer than 48 hours to
remove outliers and prepares data for monthly statistics calculation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peskas.zanzibar.data.pipeline</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Process Trip Data with District Information</h1>

      <div class="d-none name"><code>process_trip_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieves and processes trip data from the PDS API by adding district information
from community metadata. Filters out unrealistic trips longer than 48 hours to
remove outliers and prepares data for monthly statistics calculation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_trip_data</span><span class="op">(</span>pars <span class="op">=</span> <span class="cn">NULL</span>, imei_list <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pars">pars<a class="anchor" aria-label="anchor" href="#arg-pars"></a></dt>
<dd><p>Configuration parameters containing:</p><ul><li><p>pds$token: API token for PDS access</p></li>
<li><p>pds$secret: API secret for PDS access</p></li>
</ul></dd>


<dt id="arg-imei-list">imei_list<a class="anchor" aria-label="anchor" href="#arg-imei-list"></a></dt>
<dd><p>Vector of IMEI numbers for devices to retrieve trip data for</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A processed data frame with:</p><ul><li><p>district: District name (from community metadata)</p></li>
<li><p>community: Community name</p></li>
<li><p>trip: Trip identifier</p></li>
<li><p>boat: Boat identifier</p></li>
<li><p>landing_date: Date of trip landing</p></li>
<li><p>date_month: First day of landing month</p></li>
<li><p>duration_hrs: Trip duration in hours</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function:</p><ul><li><p>Calls <code><a href="get_trips.html">get_trips()</a></code> API to retrieve trip data for specified IMEIs</p></li>
<li><p>Converts timestamps to landing dates and monthly periods</p></li>
<li><p>Calculates trip duration in hours from seconds</p></li>
<li><p>Joins with community metadata to add district information</p></li>
<li><p>Filters out unrealistic trips (&gt;48 hours)</p></li>
<li><p>Standardizes column names and structure</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="calculate_monthly_trip_stats.html">calculate_monthly_trip_stats()</a></code> for using processed trip data</p></li>
<li><p><code><a href="get_trips.html">get_trips()</a></code> for the underlying API call</p></li>
<li><p><code><a href="get_metadata.html">get_metadata()</a></code> for community metadata retrieval</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Process trip data with parameters and device list</span></span></span>
<span class="r-in"><span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_config.html">read_config</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trips_stats</span> <span class="op">&lt;-</span> <span class="fu">process_trip_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  pars <span class="op">=</span> <span class="va">pars</span>,</span></span>
<span class="r-in"><span>  imei_list <span class="op">=</span> <span class="va">imei_list</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check data structure</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">trips_stats</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lorenzo Longobardi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

