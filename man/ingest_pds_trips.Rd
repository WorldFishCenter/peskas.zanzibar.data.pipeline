% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ingestion.R
\name{ingest_pds_trips}
\alias{ingest_pds_trips}
\title{Ingest Pelagic Data Systems (PDS) Trip Data}
\usage{
ingest_pds_trips(log_threshold = logger::DEBUG)
}
\arguments{
\item{log_threshold}{The logging threshold to use. Default is logger::DEBUG.
See \code{logger::log_levels} for available options.}
}
\value{
None (invisible). The function performs its operations for side effects:
\itemize{
\item Creates a parquet file locally with trip data
\item Uploads file to configured cloud storage
\item Generates logs of the process
}
}
\description{
This function handles the automated ingestion of GPS boat trip data from Pelagic Data Systems (PDS).
It performs the following operations:
\enumerate{
\item Retrieves device metadata from the configured source
\item Downloads trip data from PDS API using device IMEIs
\item Converts the data to parquet format
\item Uploads the processed file to configured cloud storage
}
}
\details{
The function requires specific configuration in the \code{conf.yml} file with the following structure:

\if{html}{\out{<div class="sourceCode yaml">}}\preformatted{pds:
  token: "your_pds_token"               # PDS API token
  secret: "your_pds_secret"             # PDS API secret
  pds_trips:
    file_prefix: "pds_trips"            # Prefix for output files
storage:
  google:                               # Storage provider name
    key: "google"                       # Storage provider identifier
    options:
      project: "project-id"             # Cloud project ID
      bucket: "bucket-name"             # Storage bucket name
      service_account_key: "path/to/key.json"
}\if{html}{\out{</div>}}

The function processes trips sequentially:
\itemize{
\item Retrieves device metadata using \code{get_metadata()}
\item Downloads trip data using the \code{get_trips()} function
\item Converts the data to parquet format
\item Uploads the resulting file to configured storage provider
}
}
\examples{
\dontrun{
# Run with default debug logging
ingest_pds_trips()

# Run with info-level logging only
ingest_pds_trips(logger::INFO)
}

}
\seealso{
\itemize{
\item \code{\link[=get_trips]{get_trips()}} for details on the PDS trip data retrieval process
\item \code{\link[=get_metadata]{get_metadata()}} for details on the device metadata retrieval
\item \code{\link[=upload_cloud_file]{upload_cloud_file()}} for details on the cloud upload process
}
}
\keyword{ingestion}
\keyword{workflow}
