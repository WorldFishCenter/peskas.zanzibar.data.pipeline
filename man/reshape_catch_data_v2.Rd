% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survey-reshaping.R
\name{reshape_catch_data_v2}
\alias{reshape_catch_data_v2}
\title{Reshape Catch Data with Length Groupings - Version 2}
\usage{
reshape_catch_data_v2(df = NULL)
}
\arguments{
\item{df}{A data frame containing catch data with species groups and length information}
}
\value{
A data frame in long format with each row representing a species at a specific
length range, or just species data if no length information is available
}
\description{
Enhanced version of reshape_catch_data that handles both survey versions.
This function takes a data frame with species catch information and reshapes it into a
long format while properly handling nested length group information for both survey versions.
}
\details{
The function auto-detects survey version based on column patterns:
\itemize{
\item Version 1: Uses single 'species' field, length data nested within species groups
\item Version 2: Uses multiple species fields (species_TL, species_RF, etc.),
fish >100cm in separate repeated group
}

For Version 2, species fields are normalized using coalesce, and the separate
length group structure for fish >100cm is properly handled.
}
\examples{
\dontrun{
final_data <- reshape_catch_data_v2(catch_info)

# Analyze counts by length range
final_data |>
  filter(!is.na(count)) |>
  group_by(species, length_range) |>
  summarize(total_count = sum(as.numeric(count), na.rm = TRUE))
}
}
\keyword{preprocessing}
