% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge-trips.R
\name{merge_trips}
\alias{merge_trips}
\title{Merge Survey and GPS Trip Data}
\usage{
merge_trips(site = c("kenya", "zanzibar"), log_threshold = logger::DEBUG)
}
\arguments{
\item{site}{Character. Site identifier: "kenya" or "zanzibar"}

\item{log_threshold}{Logger threshold level. Default is \code{logger::DEBUG}.}
}
\value{
Invisible NULL. Uploads merged parquet file to cloud storage containing:
\itemize{
\item Matched survey-trip pairs (both submission_id and trip are non-NA)
\item Unmatched surveys (trip = NA)
\item Unmatched trips (submission_id = NA)
\item Match quality indicators: n_fields_used, n_fields_ok, match_ok
}
}
\description{
Matches catch surveys to GPS trips using fuzzy matching on boat identifiers,
then merges all records (matched and unmatched) and uploads to cloud storage.
}
\details{
The function executes a five-step pipeline:
\enumerate{
\item Load device registry from cloud storage
\item Load validated surveys
\item Load preprocessed GPS trips
\item Match surveys to trips via fuzzy matching (surveys -> registry -> trips)
\item Merge matched subset with all unmatched records and upload
}

Site-specific configuration is handled automatically based on the \code{site} parameter.
}
\examples{
\dontrun{
# Kenya
merge_trips(site = "kenya")

# Zanzibar
merge_trips(site = "zanzibar")
}

}
\keyword{workflow}
